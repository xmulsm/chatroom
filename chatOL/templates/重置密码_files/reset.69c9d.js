webpackJsonp([12],{0:function(e,s,i){(function(e){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}i(2);var l=i(171),n=s(l);new e({el:"body",components:{app:n["default"]}})}).call(s,i(1))},2:function(e,s,i){(function(e){"use strict";i(3),i(4),i(5),i(15),e.config.debug=!0}).call(s,i(1))},171:function(e,s,i){var l,n;i(172),l=i(174),n=i(175),e.exports=l||{},e.exports.__esModule&&(e.exports=e.exports["default"]),n&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=n)},172:function(e,s){},174:function(e,s){"use strict";var i,l;e.exports={replace:!1,ready:function(){i=this,sign&&(i.step=3),console.log(sign)},data:function n(){var n={userKey:"",userInfo:[],step:"1",secret_tel:"",secret_email:"",validType:-1,sendEmail:"发送验证邮件",newPwd:"",centainPwd:"",code:"",timer:120,sended:!1,emailStatus:!1};return n},watch:{},filters:{},methods:{getUserByKey:function(){if(""==i.userKey)return msg.show("账号不能为空","danger"),!1;var e=({key:i.userKey},/^\d{8,20}$/),s=new RegExp("^[^@\\s]+@[^@\\.\\s]+(\\.[^@\\.\\s]+)+$");e.test(i.userKey)?i.validType=1:s.test(i.userKey)?i.validType=2:i.validType=-1,$.ajax({url:root+"/account/open/getUserInfoByAccount?account="+i.userKey,type:"post",success:function(e){if(0==e.errorCode){i.step="2",i.userInfo=e.data;var s=e.data.phone,l=e.data.email;s&&(i.validType=1,i.secret_tel=s.substring(0,3)+"*****"+s.substring(s.length-3)),l&&(i.validType=2,l=l.split("@")[0].substring(0,1)+"*****"+l.split("@")[0].substring(l.split("@")[0].length-1)+"@"+l.split("@")[1],i.secret_email=l),l&&s&&(i.validType=-1)}else{var n=e.errorDesc||"系统异常";msg.show(n,"danger")}}})},emailFind:function(){$.ajax({url:root+"/account/open/findPassword",type:"post",data:{email:i.userInfo.email},success:function(e){0==e.errorCode?(msg.show("发送成功"),i.sendEmail="重新发送",i.emailStatus=!0):msg.show(e.errorDesc)}})},getCode:function(){$.ajax({url:root+"/account/open/sendPhoneCode?phone="+i.userInfo.phone+"&codeType=2",type:"post",success:function(e){if(0==e.errorCode)msg.show("发送成功"),i.sended=!0,l=setInterval(function(){i.timer-=1,0==i.timer&&(i.timer=120,clearInterval(l),i.sended=!1)},1e3);else{var s=e.errorDesc||"系统异常";msg.show(s,"danger")}}})},verifyCode:function(){return""==i.code?(msg.show("验证码不能为空","danger"),!1):void $.ajax({url:root+"/account/open/verifyCode?code="+i.code+"&phoneOrEmail="+i.userInfo.phone+"&accountType=1",type:"post",success:function(e){0==e.errorCode?i.step="3":msg.show(e.errorDesc,"danger")}})},resetPwd:function(){var e;if(""==i.newPwd)return msg.show("密码不能为空","danger"),!1;if(i.newPwd.length<6)msg.show("密码最少6位","danger");else if(i.centainPwd!=i.newPwd)return msg.show("新密码和确认密码不一致","danger"),!1;e=sign?root+"/account/open/resetPassword?shareId="+shareId+"&sign="+sign+"&newPassword="+i.newPwd:root+"/account/open/resetPasswordByPhone?phone="+i.userInfo.phone+"&code="+i.code+"&newPassword="+i.newPwd,$.ajax({url:e,type:"post",success:function(e){0==e.errorCode&&(msg.show("修改成功"),location.replace(root+"/home"))}})},goBack:function(){location.href=root+"/login"},close:function(){location.href=root+"/home"}}}},175:function(e,s){e.exports='<div class=container> <div class="pager none"></div> <div class=header> <div class=back @click=goBack>返回登录</div> <div class="close homelink" @click=close></div> </div> <div class=box v-if="step==\'1\'"> <div class=stepContent> <p>找回密码</p> <div class="step flex"> <div class="step1 ongoing"> <div class=stepCircle></div> <div class=stepLine></div> <span class=stepName>确认账号</span> </div> <div class="step1 undo"> <div class=stepCircle></div> <div class=stepLine></div> <span class=stepName>安全验证</span> </div> <div class="step1 undo"> <div class=stepCircle></div> <span class=stepName>重置密码</span> </div> </div> </div> <div class="cells login-area"> <label class="cell-input input_control"> <div class=input-label>确认账号</div> <input class=input placeholder=请输入您要找回密码的账号 v-model=userKey debounce=300> </label> </div> <div class="box-btn box-btn-primary btn-login" @click=getUserByKey>下一步</div> </div> <div class=box v-if="step==\'2\'"> <div class=stepContent> <p>找回密码</p> <div class="step flex"> <div class="step1 done"> <div class=stepCircle></div> <div class=stepLine></div> <span class=stepName>确认账号</span> </div> <div class="step1 ongoing"> <div class=stepCircle></div> <div class=stepLine></div> <span class=stepName>安全验证</span> </div> <div class="step1 undo"> <div class=stepCircle></div> <span class=stepName>重置密码</span> </div> </div> </div> <div class="cells login-area" v-if=emailStatus> <p class=resetPw>验证邮件已发送到您的邮箱</p> <p class=subtext>请在24小时内登录您的邮箱，激活链接以重置密码</p> </div> <div class="cells login-area" v-if=!emailStatus> <label class="cell-input input_control"> <div class=input-label>验证方式</div> <div class=select-cell> <select class="select select-content" v-model=validType debounce=300> <option value=-1 v-if=userInfo.phone&&userInfo.email>请选择身份验证方式</option> <option value=1 v-if=userInfo.phone>手机</option> <option value=2 v-if=userInfo.email>邮箱</option> </select> </div> </label> <label class="cell-input input_control"> <div class=input-label>昵称</div> <div class=input>{{userInfo.employerName}}</div> </label> <div v-if="validType==\'1\'"> <label class="cell-input input_control"> <div class=input-label>已验证手机</div> <div class=input>{{secret_tel}}</div> </label> <label class="cell-input input_control" v-if="validType==\'1\'"> <div class=input-label>验证码</div> <input class=input type=text placeholder=请输入验证码 v-model=code debounce=300> <button class=btn-send-phone-code @click=getCode :class="{\'send-disabled\':sended}" :disabled=sended> <span v-if=!sended>获取</span><span v-if=sended>{{timer}}s</span> </button> </label> </div> <div v-if="validType==\'2\'"> <label class="cell-input input_control"> <div class=input-label>已验证邮箱</div> <div class=input>{{secret_email}}</div> </label> </div> </div> <button class="box-btn box-btn-primary btn-login" style="width:100%;border:1px solid #009ee7" @click=verifyCode v-if="validType==1" :disabled=!sended :class="{\'disabled\':!sended}">下一步 </button> <button class="box-btn box-btn-primary btn-login big-f" style="width:100%;border:1px solid #009ee7" @click=emailFind v-if="validType==2" v-text=sendEmail></button> </div> <div class=box v-if="step==\'3\'"> <div class=stepContent> <p>找回密码</p> <div class="step flex"> <div class="step1 done"> <div class=stepCircle></div> <div class=stepLine></div> <span class=stepName>确认账号</span> </div> <div class="step1 done"> <div class=stepCircle></div> <div class=stepLine></div> <span class=stepName>安全验证</span> </div> <div class="step1 ongoing"> <div class=stepCircle></div> <span class=stepName>重置密码</span> </div> </div> </div> <div class="cells login-area"> <p class=resetPw>身份验证成功，请重置密码</p> <label class="cell-input input_control"> <div class=input-label>新密码</div> <input class=input type=password placeholder=新密码 v-model=newPwd debounce=300> </label> <label class="cell-input input_control"> <div class=input-label>确认密码</div> <input class=input type=password placeholder=确认密码 v-model=centainPwd debounce=300> </label> </div> <div class="box-btn box-btn-primary btn-login" @click=resetPwd>确定</div> </div> </div>'}});